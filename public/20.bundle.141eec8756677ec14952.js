(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1012:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),a=n(1),i=n.n(a),c=n(14),u=n(58),p=n(36),f={any:function(t,e,n){var r=t[e];if(!(r instanceof Float64Array||r instanceof Float32Array||r instanceof Int32Array||r instanceof Int16Array||r instanceof Int8Array||r instanceof Uint32Array||r instanceof Uint16Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a typed array.")},float64:function(t,e,n){if(!(t[e]instanceof Float64Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Float64Array.")},float32:function(t,e,n){if(!(t[e]instanceof Float32Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Float32Array.")},float:function(t,e,n){if(!(t[e]instanceof Float64Array||t[e]instanceof Float32Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Float32Array or Float64Array.")},int32:function(t,e,n){if(!(t[e]instanceof Int32Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected an Int32Array.")},int16:function(t,e,n){if(!(t[e]instanceof Int16Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected an In16Array.")},int8:function(t,e,n){if(!(t[e]instanceof Int8Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected an Int8Array.")},int:function(t,e,n){if(!(t[e]instanceof Int32Array||t[e]instanceof Int16Array||t[e]instanceof Int8Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected an Int32Array, In16Array, or Int8Array.")},uint32:function(t,e,n){if(!(t[e]instanceof Uint32Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Uint32Array.")},uint16:function(t,e,n){if(!(t[e]instanceof Uint16Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Uint16Array.")},uint8:function(t,e,n){if(!(t[e]instanceof Uint8Array))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Uint8Array.")},uint8clamped:function(t,e,n){if(!(t[e]instanceof Uint8ClampedArray))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Uint8ClampedArray.")},uint:function(t,e,n){if(!(t[e]instanceof Uint32Array||t[e]instanceof Uint16Array||t[e]instanceof Uint8Array||t[e]instanceof Uint8ClampedArray))return new Error("Invalid prop `"+e+"` supplied to `"+n+"`. Expected a Uint32Array, Uint16Array, Uint8Array, or Uint8ClampedArray.")}};n(985);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?b(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=p.b,h=A.DicomMetaDictionary,E=A.DicomMessage;function I(t,e){return o.a.createElement("div",{key:t},o.a.createElement("b",null,t),": ",e)}var S=function(t){function e(){var t,n;s(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return w(b(n=d(this,(t=v(e)).call.apply(t,[this].concat(o)))),"state",{content:null,error:null}),w(b(n),"setViewportActiveHandler",(function(){var t=n.props,e=t.setViewportActive,r=t.viewportIndex;r!==t.activeViewportIndex&&e(r)})),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){this.setContentFromByteArray(this.props.byteArray)}},{key:"setContentFromByteArray",value:function(t){var e=t.buffer,n=E.readFile(e),r=h.naturalizeDataset(n.dict);r._meta=h.namifyDataset(n.meta);var a=function(t){var e=[],n="".concat(t.PatientName," (").concat(t.PatientSex,", #").concat(t.PatientID,")");e.push(I("Patient",n));var r=t.StudyDescription;e.push(I("Study",r));var a="".concat(t.SeriesDescription," (#").concat(t.SeriesNumber,")");e.push(I("Series",a));var i="".concat(t.Manufacturer," (").concat(t.ManufacturerModelName,", #").concat(t.DeviceSerialNumber,")");e.push(I("Manufacturer",i));var c={CompletionFlag:"Completion flag",VerificationFlag:"Verification flag"};Object.keys(c).forEach((function(n){if(t[n]){var r=I(c[n],t[n]);e.push(r)}}));var u="".concat(t.ContentDate," ").concat(t.ContentTime);return e.push(I("Content Date/Time",u)),e.push(),o.a.createElement("div",null,e)}(r),i=function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e.ConceptNameCodeSequence){var a=e.ConceptNameCodeSequence,i=a.CodeMeaning,c=a.CodeValue,u=a.CodingSchemeDesignator;n="".concat(i," (").concat(c," - ").concat(u,")")}var p=[];if(n){var f="h".concat(r);p.push(o.a.createElement(f,{key:n},n))}return Object.keys(e).forEach((function(n){var a,i=e[n];a=i instanceof Object?t(i,r+1):o.a.createElement("div",{key:n},n," - ",e[n]),p.push(a)})),o.a.createElement("div",null,p)}(r),c=o.a.createElement(o.a.Fragment,null,a,i);this.setState({content:c})}},{key:"render",value:function(){var t=this.state,e=t.content,n=t.error;return o.a.createElement("div",{"data-cy":"dicom-html-viewport",className:"DicomHtmlViewport",onClick:this.setViewportActiveHandler,onScroll:this.setViewportActiveHandler},e,n&&o.a.createElement("h2",null,JSON.stringify(n)))}}])&&y(n.prototype,r),a&&y(n,a),e}(r.Component);w(S,"propTypes",{byteArray:f.uint8,setViewportActive:i.a.func.isRequired,viewportIndex:i.a.number.isRequired,activeViewportIndex:i.a.number.isRequired});var x=S,O=c.a.redux.actions.setViewportActive,g=Object(u.b)((function(t,e){var n=e.viewportIndex,r=e.byteArray;return{viewportIndex:n,activeViewportIndex:t.viewports.activeViewportIndex,byteArray:r}}),(function(t,e){var n=e.viewportIndex;return{setViewportActive:function(){t(O(n))}}}))(x);function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function D(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?P(t):e}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var V=c.a.utils.DicomLoaderService,M=function(t){function e(){var t,n;j(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return k(P(n=D(this,(t=F(e)).call.apply(t,[this].concat(o)))),"state",{byteArray:null,error:null}),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){var t=this,e=this.props.viewportData,n=e.displaySet,r=e.studies;V.findDicomDataPromise(n,r).then((function(e){var n=new Uint8Array(e);t.setState({byteArray:n})}),(function(e){throw t.setState({error:e}),new Error(e)}))}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.byteArray&&o.a.createElement(g,{byteArray:this.state.byteArray,viewportIndex:this.props.viewportIndex}),this.state.error&&o.a.createElement("h2",null,JSON.stringify(this.state.error)))}}])&&U(n.prototype,r),a&&U(n,a),e}(r.Component);k(M,"propTypes",{studies:i.a.object,displaySet:i.a.object,viewportIndex:i.a.number,viewportData:i.a.object});e.default=M},985:function(t,e,n){}}]);
//# sourceMappingURL=20.bundle.141eec8756677ec14952.js.map